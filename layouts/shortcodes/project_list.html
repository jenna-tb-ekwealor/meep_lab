{{ $cat := .Get "categories" }} <!-- Get category passed to shortcode -->

<!-- Define a mapping of shorthand categories to full category names -->
{{ $category_names := dict 
  "physio" "Plant Physiology & Climate Adaptation" 
  "molecbio" "Molecular Biology, Genomics & Gene Regulation" 
  "ecoevo" "Reproductive Ecology & Evolution" 
  "microbio" "Microbial Ecology & Symbiosis" 
  "environhealth" "Environmental Health, Climate Justice & Public Science" }}

<!-- Display full category name at the top -->
<h2>{{ index $category_names $cat }}</h2>

<ul class="project-list">
  {{ range where .Site.Pages "Section" "allprojects" }} <!-- Filter only allprojects type -->
    {{ if in .Params.categories $cat }} <!-- Check if the project belongs to the specified category -->
      <li>
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
        <!-- Do NOT show the category name in the project listing -->
      </li>
    {{ end }}
  {{ end }}
</ul>
